= Salesforce B2C Commerce Cloud Connector - Studio Configuration - Mule 4
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:imagesdir: ../../../assets/images/

Before you can use a connector in Anypoint Studio, you must: 

. Install the connector by using either Anypoint Exchange or Anypoint Studio.
. Configure the connector.
. Configure an input source for the connector.

In Anypoint Studio, this connector is called the Shop API Connector.

== Add the Connector to Your Project

Anypoint Studio provides these ways to add a connector to your project:

* From Exchange
* From Studio
* Add a dependency to your project's `pom.xml` file

== Add the Connector Using Exchange

. In Studio, create a Mule project.
. Click the Exchange (X) icon in the upper left of the Studio taskbar.
. In Exchange, click Login and supply your Anypoint Platform username and password.
. In Exchange, search for Salesforce B2C Commerce Cloud Connector.
. Select Shop API Connector and click Add to project.
. Follow the prompts to install Salesforce B2C Commerce Cloud Connector.

== Add the Connector in Studio

. In Studio, create a Mule project.
. In the Mule palette, click (X) Search in Exchange.
. In Add Modules to Project, type Salesforce B2C Commerce Cloud Connector in the search field.
. Click *Shop Connector* in *Available modules*.
. Click Add.
. Click Finish.

== Add the Connector as a pom.xml File Dependency

. Open your Mule project in Anypoint Studio.
. Add the connector as a dependency in the pom.xml file:
+
[source,xml,linenums]
----
<dependency>
    <groupId>com.mulesoft.connectors</groupId>
    <artifactId>shop-api</artifactId>
    <version>RELEASE</version>
    <classifier>mule-plugin</classifier>
</dependency>
----

== Configure an Input Source

Configure an input source for the flow, such as HTTP Listener or Scheduler.

== Connection Providers

Salesforce B2C Commerce Cloud Connector supports these connection providers:

* Client ID Connection Provider
* Customers Auth Connection Provider
* OAuth2 Application Connection Provider

=== Configure the Connector Using Client ID Connection Provider

. After adding a connector dependency to the Mule project, click the *Global Elements* tab at the base of the canvas.
. In the Global Mule Configuration Elements screen, click *Create*.
. In the Choose Global Type wizard, collapse the connector configuration, select *Client ID Connection Provider*, and click *OK*:
. Configure the following parameters:
+
[%header,cols="30s,70a"]
|===
|Field Name   |Value
|Base Uri     |Shop API base URI
|X dw client id |Client ID
|===
+
image::salesforce/salesforce-b2c-commerce-cloud-client-id-configuration.png[]
+
. You can either enter credentials directly into the global configuration properties or reference them from a configuration file that contains the values.
. This example adds credentials to the application properties file and references it using placeholders.
. Click *Test Connection* to validate the configuration.
+
image::salesforce/salesforce-b2c-commerce-cloud-client-id-config-test-connection.png[]
+
. On success, the configuration is ready to use.
. A successful Client ID Connection Provider configuration looks like this:
+
[source,xml,linenums]
----
<shop:config 
  name="Client_Id" 
  doc:name="Shop Connector Config">
   <shop:client-id-connection 
    baseUri="${shop.address}" 
    xDwClientId="${shop.clientId}" />
</shop:config>
----

=== Configure Using Customers OAuth Connection Provider Configuration

. In Anypoint Studio, in a Mule application, click *Global Elements* and click *Create*.
. Expand *Connector configuration*, select *Customers Auth Connection Provider* and click *OK*.
. Configure the following parameters:
+
[%header,cols="30s,70a"]
|===
|Field Name   |Value
| Username | The username to authenticate the requests 
| Password |  The password to authenticate the requests 
| Base Uri |  Shop API base URI
| Client Id |  Client ID 
| Type | Credentials or Guest
|===
+
image::salesforce/salesforce-b2c-commerce-cloud-customers-auth-config.jpg[]
+
. You can either enter credentials directly into the global configuration properties or reference them from a configuration file that contains the values.
. This example adds credentials to the application properties file and references it using placeholders.
. Click *Test Connection* to validate the configuration. On success, the configuration is ready to use!
. A successful Customers Auth Connection Provider configuration looks like this:
+
[source,xml,linenums]
----
<shop:shop-configuration-config 
  name="customers_auth" 
  doc:name="Shop Connector Shop configuration" >
	<shop:customers-auth-connection 
    username="${shop.username}" 
    password="${shop.password}" 
    baseUri="${shop.baseuri}" 
    clientId="${shop.clientId}" 
    type="CREDENTIALS" />
</shop:shop-configuration-config>
----

=== Configure Using OAuth2 Application Connection Provider Configuration

. In Anypoint Studio, in a Mule application, click *Global Elements* and click *Create*.
. Expand *Connector Configuration*, select *Shop Connector Conf Auth2.0* and click *OK*. 
. Configure the following parameters:
+
[%header,cols="30s,70a"]
|===
|Field Name   |Value
|Base Uri    |Shop API base URI
|Client Id | Client ID
|Client Secret | Client Secret
|Token url | Token URL
|===
+
image::salesforce/salesforce-b2c-commerce-cloud-oauth2-configuration.png[]
+
. You can either enter credentials directly into the global configuration properties or reference them from a configuration file that contains the values.
. This example adds credentials to the application properties file and references it using placeholders.
. Click *Test Connection* to validate the configuration. On success, the configuration is ready to use.
+
image::salesforce/salesforce-b2c-commerce-cloud-oauth2-test-connection.png[]
+
. A successful OAuth Application Connection Provider configuration looks like this:
+
[source,xml,linenums]
----
<shop:config 
  name="Auth2.0" 
  doc:name="Shop Connector Config" >
   <shop:oauth2-application-connection 
    baseUri="${shop.address}" >
        <shop:oauth-client-credentials 
          clientId="${shop.combinedClientId}" 
          clientSecret="${shop.clientSecret}" 
          tokenUrl="${shop.tokenUrl}?grant_type="${shop.BMUserGrantType}"&amp;client_id=${shop.clientId}"/>
   </shop:oauth2-application-connection>
</shop:config>
----

== See Also

* https://help.mulesoft.com[MuleSoft Help Center]